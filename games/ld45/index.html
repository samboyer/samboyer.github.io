<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Mind Game(s) - Prologue</title>

	<script src="http://olado.github.io/doT/doT.min.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
	<script src="dedalus.js"></script>
	<script src="dedalus-web.js"></script>
	<script src="dedalus-dedlee.js"></script>

	<link rel="stylesheet" href="themes/plain/story.css">
	<link rel="stylesheet" href="css/style.css">

	<link href="https://fonts.googleapis.com/css?family=Roboto+Mono&display=swap" rel="stylesheet">
</head>
<body>

		<div id="d1-portalglow"></div>
		<div id="d1-circuitry"></div>

<script>
function deductHealth(amnt){
	setHealth(Math.max(story.health - amnt, 0));
	if(story.health == 0){
		story.turnTo("death");
	}
}
function setHealth(hp){
	story.health = hp;
	updateHp();
}
function updateHp(){
	$('#healthBar').css('width',story.health+'%');
	$('#healthLabel').text(story.health+'HP');
}
</script>

	<div id="dedleeSource" style="display:none;">
	<script src="dedleeSource.js"></script>

</div>

	<div id="story">
	</div>

	<div id="wrapper">
		<div id="title"></div>

		<div id="inventoryHostWrapper">
			<div id="healthBarWrapper"><div id="healthBar"></div><span id="healthLabel"></span></div>
			<h2>Inventory</h2>
			<div id="inventoryHost"></div>
		</div>

		<div id="host"></div>
	</div>

	<div id="interactionHost"></div>

	<div id="undoStageHost"></div>

	<div id="footer">
		<a id="undoHost" href="#">Undo</a> <a id="saveHost" href="#">Save</a> &bull; <a id="restoreHost" href="#">Restore</a> &bull; <a id="resetHost" href="#">Reset</a>
	</div>

	<script>
		$(function () {
			new DedalusWeb({
				dedleeSource	  : $('#dedleeSource'),
				domSource		 : $('#story'),
				domTarget		 : $('#host'),
				titleTarget	   : $('#title'),
				inventoryTarget   : $('#inventoryHost'),
				interactionTarget : $('#interactionHost'),
				undoTarget		: $('#undoHost'),
				undoStageTarget   : $('#undoStageHost'),
				saveTarget		: $('#saveHost'),
				restoreTarget	 : $('#restoreHost'),
				resetTarget	   : $('#resetHost'),
			});
		});

		$('#restoreHost').click(
			function(){
				setTimeout(
					function(){updateHp();}, 1
				);
			}
		);
	</script>
</body>
</html>